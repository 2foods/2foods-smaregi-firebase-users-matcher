
# クレデンシャルファイルの設置

/credentials には、以下のURLからFirebaseのadminのjsonファイルを配置してください。

https://two-store.cybozu.com/k/3/show#record=27

app.pyの以下の部分で、ファイル名を指定しています。

環境に応じてファイル名を変更してください

```python

env = "env"
# env = "prod"
cred = credentials.Certificate(f"credentials/{env}.json")
```


※ このファイルは、Firebaseの管理画面からもダウンロードできますが、取り扱いは注意してください。処理が終わったら、このファイルは削除してください。

# inputデータの配置

スマレジの会員CSVを入れてください。

excelの場合は、csvファイルに変換してください。

また、以下のURLを参考にして会員コードの指数表記を解除してください。

https://help.smaregi.jp/hc/ja/articles/360000674267-CSV%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%86%85%E3%81%AE%E6%95%B0%E5%80%A4%E3%81%8C%E7%9C%81%E7%95%A5%E3%81%95%E3%82%8C%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86-E-12-%E3%81%AA%E3%81%A9


作成時は以下のカラムが入っているcsvを取り扱ったため、必要に応じてapp.pyを開き、順番変更する際のカラムを追加/削除してください。

```
会員ID,会員コード,姓,名,電話番号,メールアドレス,ポイント,ポイント期限,最終来店日時,入会日,退会日,"案内メール受取許可フラグ (0:拒否, 1:許可)",備考,"会員状態区分 (0:利用可, 1:利用停止, 2:紛失, 3:退会, 4:名寄せ)",所属店舗,取引額,取引数,会員ランクコード,会員ランク名,メールアドレス2,メールアドレス3,会社名,部署名,役職,ポイント付与単位(金額),ポイント付与単位(ポイント),PINコード,社員ランクコード,社員ランク名,会員番号,旅券番号,国籍,アルファベット氏名,備考2,マイル
```


# ローカルの実行

以下のコマンドを実行してください。

```sh
$ pip install -r requirements.txt
$ python app.py
```
